(this["webpackJsonpreact-boilerplate"]=this["webpackJsonpreact-boilerplate"]||[]).push([[0],{17:function(e,n,t){e.exports=t.p+"static/media/phonebook.983026a8.png"},19:function(e,n,t){e.exports=t(43)},24:function(e,n,t){},42:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(16),c=t.n(u),o=(t(24),t(18)),l=t(6),m=t(2),i=function(e){var n=e.searchTerm,t=e.handleSearchInput;return r.a.createElement(r.a.Fragment,null,"filter shown with"," ",r.a.createElement("input",{value:n,onChange:t,placeholder:"search..."}))},s=function(e){var n=e.addPerson,t=e.handleNameInput,a=e.handleNumberInput,u=e.newName,c=e.newNumber;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name:"," ",r.a.createElement("input",{placeholder:"add name...",value:u,onChange:t}),r.a.createElement("br",null),"number:"," ",r.a.createElement("input",{placeholder:"add number...",value:c,onChange:a})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},d=function(e){var n=e.persons,t=e.searchTerm,a=e.deletePerson,u=e.setMessage,c=n.filter((function(e){return t?!!e.name.toLowerCase().includes(t.toLowerCase())&&e:e}));return r.a.createElement(r.a.Fragment,null,c.map((function(e){return r.a.createElement("div",{key:e.id},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return function(e){window.confirm("Delete ".concat(e.name,"? "))&&(a(e.id),u({text:"".concat(e.name," has been deleted."),type:"message"}),setTimeout((function(){u(null)}),5e3))}(e)}},"delete"))})))},f=t(4),p=t.n(f),h="/api/persons",b=function(){return p.a.get(h).then((function(e){return e.data}))},v=function(e){return p.a.post(h,e).then((function(e){return e.data}))},g=function(e,n){return p.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},E=function(e){return p.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},w=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"message"===n.type?"message":"error"},n.text)},j=t(17),N=t.n(j);t(42);var O=function(){var e=Object(a.useState)([]),n=Object(m.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),f=Object(m.a)(c,2),p=f[0],h=f[1],j=Object(a.useState)(""),O=Object(m.a)(j,2),y=O[0],C=O[1],T=Object(a.useState)(""),x=Object(m.a)(T,2),S=x[0],k=x[1],I=Object(a.useState)(null),P=Object(m.a)(I,2),L=P[0],A=P[1];return Object(a.useEffect)((function(){b().then((function(e){return u(e)}))}),[]),r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null," ",r.a.createElement("img",{src:N.a,className:"App-logo"}),"Phonebook")),r.a.createElement("div",{className:"AppBody"},r.a.createElement(w,{message:L}),r.a.createElement(i,{searchTerm:S,handleSearchInput:function(e){e.preventDefault(),k(e.target.value)}}),r.a.createElement("h3",null,"Add a new"),r.a.createElement(s,{addPerson:function(e,n){e.preventDefault();var a={name:p,number:y};if(0===p.length||0===y.length)return A({text:"Please enter both a name and a number.",type:"error"}),setTimeout((function(){A(null)}),5e3),null;var r=t.some((function(e){return e.name.toLowerCase()===p.toLowerCase()})),c=t.find((function(e){return e.name.toLowerCase()===p.toLowerCase()})),m=Object(l.a)({},c,{number:y});if(r)return window.confirm("".concat(p," is already in the phonebook, replace number? "))?void g(c.id,m).then((function(e){console.log("returnedPerson",e),t.find((function(n){if(n.id===e.id){var a=Object(l.a)({},n,{number:e.number});return u(t.map((function(e){return e.id!==a.id?e:a}))),h(""),C(""),A({text:"".concat(p," has been updated "),type:"message"}),setTimeout((function(){A(null)}),5e3),null}return null}))})).catch((function(e){console.log("personToUpdate.name",c.name),console.log("error",e),A({text:"".concat(c.name," has already been removed from server "),type:"error"}),setTimeout((function(){A(null)}),5e3)})):(h(""),void C(""));v(a).then((function(e){u([].concat(Object(o.a)(t),[e]))})),h(""),C(""),A({text:"".concat(p," has been added. "),type:"message"}),setTimeout((function(){A(null)}),5e3)},handleNameInput:function(e){h(e.target.value)},handleNumberInput:function(e){C(e.target.value)},newName:p,newNumber:y}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(d,{persons:t,searchTerm:S,deletePerson:function(e){E(e);var n=t.filter((function(n){return n.id!==e}));u(n)},setMessage:A})))};c.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.cf81a68e.chunk.js.map