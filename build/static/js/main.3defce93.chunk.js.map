{"version":3,"sources":["phonebook.png","components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["module","exports","Filter","searchTerm","handleSearchInput","value","onChange","placeholder","PersonForm","addPerson","handleNameInput","handleNumberInput","newName","newNumber","onSubmit","type","Persons","persons","deletePerson","setMessage","personSearch","filter","person","name","toLowerCase","includes","map","key","id","number","onClick","window","confirm","text","setTimeout","handleDelete","baseUrl","axios","get","then","response","data","newObject","post","put","delete","Notification","message","className","App","useState","setPersons","setNewName","setNewNumber","setSearchTerm","useEffect","personService","initialPersons","src","logo","alt","event","preventDefault","target","e","nameObject","length","isDuplicate","some","personToUpdate","find","updatedPerson","returnedPerson","console","log","p","catch","error","returnedError","errors","properties","personsList","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3defce93.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/phonebook.983026a8.png\";","import React from 'react'\n\nconst Filter = ({searchTerm, handleSearchInput}) => {\n    return (\n        <>\n          filter shown with{' '}\n      <input\n        value={searchTerm}\n        onChange={handleSearchInput}\n        placeholder=\"search...\"\n      />\n        </>\n    )\n}\n\nexport default Filter","import React from 'react'\n\nconst PersonForm = ({addPerson, handleNameInput, handleNumberInput, newName, newNumber}) => {\n\n    return (\n        <>\n         <form onSubmit={addPerson}>\n        <div>\n          name:{' '}\n          <input\n            placeholder=\"add name...\"\n            value={newName}\n            onChange={handleNameInput}\n          />\n          <br />\n          number:{' '}\n          <input\n            placeholder=\"add number...\"\n            value={newNumber}\n            onChange={handleNumberInput}\n          />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n        </>\n    )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Persons = ({ persons, searchTerm, deletePerson, setMessage }) => {\n  const personSearch = persons.filter((person) => {\n    if (!searchTerm) return person\n    if (person.name.toLowerCase().includes(searchTerm.toLowerCase())) {\n      return person\n    }\n    return false\n  })\n\n  const handleDelete = (person) => {\n    if (window.confirm(`Delete ${person.name}? `)) {\n      deletePerson(person.id)\n      setMessage({ text: `${person.name} has been deleted.`, type: 'message' })\n      setTimeout(() => {\n        setMessage(null)\n      }, 5000)\n    }\n    return\n  }\n  return (\n    <>\n      {personSearch.map((person) => {\n        return (\n          <div key={person.id}>\n            {person.name} {person.number}{' '}\n            <button onClick={() => handleDelete(person)}>delete</button>\n          </div>\n        )\n      })}\n    </>\n  )\n}\n\nexport default Persons\n","import axios from 'axios'\nconst baseUrl = '/api/persons'\nconst infoUrl = '/api/info'\n\nconst getInfo = () => {\n  const request = axios.get(infoUrl)\n  return request.then((response) => {\n    return response.data\n  })\n}\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then((response) => response.data)\n}\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then((response) => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then((response) => response.data)\n}\n\nconst deleteRecord = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then((response) => response.data)\n}\n\nexport default {\n  getAll,\n  create,\n  update,\n  deleteRecord,\n  getInfo,\n}\n","import React from 'react'\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  } else {\n    return (\n      <div className={message.type === 'message' ? 'message' : 'error'}>\n        {message.text}\n      </div>\n    )\n  }\n}\n\nexport default Notification\n","import React, { useState, useEffect } from 'react'\r\nimport Filter from './components/Filter'\r\nimport PersonForm from './components/PersonForm'\r\nimport Persons from './components/Persons'\r\nimport personService from './services/persons'\r\nimport Notification from './components/Notification'\r\nimport logo from './phonebook.png'\r\nimport './App.css'\r\n\r\nfunction App() {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n  const [searchTerm, setSearchTerm] = useState('')\r\n  const [message, setMessage] = useState(null)\r\n\r\n  useEffect(() => {\r\n    personService.getAll().then((initialPersons) => setPersons(initialPersons))\r\n  }, [])\r\n\r\n  const addPerson = (e, id) => {\r\n    e.preventDefault()\r\n    const nameObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n    }\r\n    if (newName.length === 0 || newNumber.length === 0) {\r\n      setMessage({\r\n        text: `Please enter both a name and a number.`,\r\n        type: 'error',\r\n      })\r\n      setTimeout(() => {\r\n        setMessage(null)\r\n      }, 5000)\r\n      return null\r\n    }\r\n\r\n    const isDuplicate = persons.some(\r\n      (person) => person.name.toLowerCase() === newName.toLowerCase()\r\n    )\r\n    const personToUpdate = persons.find(\r\n      (person) => person.name.toLowerCase() === newName.toLowerCase()\r\n    )\r\n    const updatedPerson = { ...personToUpdate, number: newNumber }\r\n    if (isDuplicate) {\r\n      if (\r\n        window.confirm(\r\n          `${newName} is already in the phonebook, replace number? `\r\n        )\r\n      ) {\r\n        personService\r\n          .update(personToUpdate.id, updatedPerson)\r\n          .then((returnedPerson) => {\r\n            console.log('returnedPerson', returnedPerson)\r\n            persons.find((person) => {\r\n              if (person.id === returnedPerson.id) {\r\n                const p = { ...person, number: returnedPerson.number }\r\n                setPersons(\r\n                  persons.map((person) => (person.id !== p.id ? person : p))\r\n                )\r\n                setNewName('')\r\n                setNewNumber('')\r\n                setMessage({\r\n                  text: `${newName} has been updated `,\r\n                  type: 'message',\r\n                })\r\n                setTimeout(() => {\r\n                  setMessage(null)\r\n                }, 5000)\r\n                return null\r\n              }\r\n\r\n              return null\r\n            })\r\n          })\r\n          .catch((error) => {\r\n            console.log('personToUpdate.name', personToUpdate.name)\r\n            console.log('error', error)\r\n            setMessage({\r\n              text: `${personToUpdate.name} has already been removed from server `,\r\n              type: 'error',\r\n            })\r\n            setTimeout(() => {\r\n              setMessage(null)\r\n            }, 5000)\r\n          })\r\n\r\n        return\r\n      }\r\n      setNewName('')\r\n      setNewNumber('')\r\n      return\r\n    }\r\n    personService.create(nameObject).then((returnedPerson) => {\r\n      const returnedError = returnedPerson.errors\r\n      console.log('returnedError', returnedError)\r\n      if (returnedError) {\r\n        if (returnedError.name && returnedError.number) {\r\n          console.log('returnedError', returnedError)\r\n          setMessage({\r\n            text: `${returnedError.name.properties.message}, and ${returnedError.number.properties.message} `,\r\n            type: 'error',\r\n          })\r\n          setTimeout(() => {\r\n            setMessage(null)\r\n          }, 5000)\r\n          return\r\n        } else if (returnedError.name) {\r\n          console.log('returnedError.name', returnedError.name)\r\n          setMessage({\r\n            text: `${returnedError.name.properties.message} `,\r\n            type: 'error',\r\n          })\r\n          setTimeout(() => {\r\n            setMessage(null)\r\n          }, 5000)\r\n          return\r\n        } else if (returnedError.number) {\r\n          console.log('returnedError.number', returnedError.number)\r\n          setMessage({\r\n            text: `${returnedError.number.properties.message} `,\r\n            type: 'error',\r\n          })\r\n          setTimeout(() => {\r\n            setMessage(null)\r\n          }, 5000)\r\n          return\r\n        }\r\n        return\r\n      }\r\n      setPersons([...persons, returnedPerson])\r\n      setNewName('')\r\n      setNewNumber('')\r\n      setMessage({\r\n        text: `${returnedPerson.name} has been added. `,\r\n        type: 'message',\r\n      })\r\n      setTimeout(() => {\r\n        setMessage(null)\r\n      }, 5000)\r\n    })\r\n  }\r\n\r\n  const deletePerson = (id) => {\r\n    personService.deleteRecord(id)\r\n    const personsList = persons.filter((person) => person.id !== id)\r\n    setPersons(personsList)\r\n  }\r\n  const handleNameInput = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberInput = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleSearchInput = (event) => {\r\n    event.preventDefault()\r\n\r\n    setSearchTerm(event.target.value)\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        <h1>\r\n          {' '}\r\n          <img src={logo} className=\"App-logo\" alt=\"phonebook\" />\r\n          Phonebook\r\n        </h1>\r\n      </header>\r\n      <div className=\"AppBody\">\r\n        <Notification message={message} />\r\n        <Filter searchTerm={searchTerm} handleSearchInput={handleSearchInput} />\r\n        <h3>Add a new</h3>\r\n\r\n        <PersonForm\r\n          addPerson={addPerson}\r\n          handleNameInput={handleNameInput}\r\n          handleNumberInput={handleNumberInput}\r\n          newName={newName}\r\n          newNumber={newNumber}\r\n        />\r\n        <h3>Numbers</h3>\r\n        <Persons\r\n          persons={persons}\r\n          searchTerm={searchTerm}\r\n          deletePerson={deletePerson}\r\n          setMessage={setMessage}\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './App';\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n"],"sourceRoot":""}