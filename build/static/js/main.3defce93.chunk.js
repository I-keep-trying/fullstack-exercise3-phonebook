(this["webpackJsonpreact-boilerplate"]=this["webpackJsonpreact-boilerplate"]||[]).push([[0],{17:function(e,n,t){e.exports=t.p+"static/media/phonebook.983026a8.png"},19:function(e,n,t){e.exports=t(43)},24:function(e,n,t){},42:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(16),u=t.n(o),c=(t(24),t(18)),l=t(6),m=t(3),s=function(e){var n=e.searchTerm,t=e.handleSearchInput;return r.a.createElement(r.a.Fragment,null,"filter shown with"," ",r.a.createElement("input",{value:n,onChange:t,placeholder:"search..."}))},i=function(e){var n=e.addPerson,t=e.handleNameInput,a=e.handleNumberInput,o=e.newName,u=e.newNumber;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name:"," ",r.a.createElement("input",{placeholder:"add name...",value:o,onChange:t}),r.a.createElement("br",null),"number:"," ",r.a.createElement("input",{placeholder:"add number...",value:u,onChange:a})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},d=function(e){var n=e.persons,t=e.searchTerm,a=e.deletePerson,o=e.setMessage,u=n.filter((function(e){return t?!!e.name.toLowerCase().includes(t.toLowerCase())&&e:e}));return r.a.createElement(r.a.Fragment,null,u.map((function(e){return r.a.createElement("div",{key:e.id},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return function(e){window.confirm("Delete ".concat(e.name,"? "))&&(a(e.id),o({text:"".concat(e.name," has been deleted."),type:"message"}),setTimeout((function(){o(null)}),5e3))}(e)}},"delete"))})))},p=t(2),f=t.n(p),b="/api/persons",h=function(){return f.a.get(b).then((function(e){return e.data}))},g=function(e){return f.a.post(b,e).then((function(e){return e.data}))},v=function(e,n){return f.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},E=function(e){return f.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},w=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"message"===n.type?"message":"error"},n.text)},y=t(17),j=t.n(y);t(42);var N=function(){var e=Object(a.useState)([]),n=Object(m.a)(e,2),t=n[0],o=n[1],u=Object(a.useState)(""),p=Object(m.a)(u,2),f=p[0],b=p[1],y=Object(a.useState)(""),N=Object(m.a)(y,2),O=N[0],T=N[1],x=Object(a.useState)(""),C=Object(m.a)(x,2),k=C[0],S=C[1],I=Object(a.useState)(null),P=Object(m.a)(I,2),L=P[0],A=P[1];return Object(a.useEffect)((function(){h().then((function(e){return o(e)}))}),[]),r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null," ",r.a.createElement("img",{src:j.a,className:"App-logo",alt:"phonebook"}),"Phonebook")),r.a.createElement("div",{className:"AppBody"},r.a.createElement(w,{message:L}),r.a.createElement(s,{searchTerm:k,handleSearchInput:function(e){e.preventDefault(),S(e.target.value)}}),r.a.createElement("h3",null,"Add a new"),r.a.createElement(i,{addPerson:function(e,n){e.preventDefault();var a={name:f,number:O};if(0===f.length||0===O.length)return A({text:"Please enter both a name and a number.",type:"error"}),setTimeout((function(){A(null)}),5e3),null;var r=t.some((function(e){return e.name.toLowerCase()===f.toLowerCase()})),u=t.find((function(e){return e.name.toLowerCase()===f.toLowerCase()})),m=Object(l.a)({},u,{number:O});if(r)return window.confirm("".concat(f," is already in the phonebook, replace number? "))?void v(u.id,m).then((function(e){console.log("returnedPerson",e),t.find((function(n){if(n.id===e.id){var a=Object(l.a)({},n,{number:e.number});return o(t.map((function(e){return e.id!==a.id?e:a}))),b(""),T(""),A({text:"".concat(f," has been updated "),type:"message"}),setTimeout((function(){A(null)}),5e3),null}return null}))})).catch((function(e){console.log("personToUpdate.name",u.name),console.log("error",e),A({text:"".concat(u.name," has already been removed from server "),type:"error"}),setTimeout((function(){A(null)}),5e3)})):(b(""),void T(""));g(a).then((function(e){var n=e.errors;if(console.log("returnedError",n),n)return n.name&&n.number?(console.log("returnedError",n),A({text:"".concat(n.name.properties.message,", and ").concat(n.number.properties.message," "),type:"error"}),void setTimeout((function(){A(null)}),5e3)):n.name?(console.log("returnedError.name",n.name),A({text:"".concat(n.name.properties.message," "),type:"error"}),void setTimeout((function(){A(null)}),5e3)):n.number?(console.log("returnedError.number",n.number),A({text:"".concat(n.number.properties.message," "),type:"error"}),void setTimeout((function(){A(null)}),5e3)):void 0;o([].concat(Object(c.a)(t),[e])),b(""),T(""),A({text:"".concat(e.name," has been added. "),type:"message"}),setTimeout((function(){A(null)}),5e3)}))},handleNameInput:function(e){b(e.target.value)},handleNumberInput:function(e){T(e.target.value)},newName:f,newNumber:O}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(d,{persons:t,searchTerm:k,deletePerson:function(e){E(e);var n=t.filter((function(n){return n.id!==e}));o(n)},setMessage:A})))};u.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.3defce93.chunk.js.map